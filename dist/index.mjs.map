{"version":3,"sources":["../src/satori.ts","../src/schema.ts"],"sourcesContent":["import { EncryptPayload } from \"./models/encrypt\";\r\nimport { GetPayload } from \"./models/get\";\r\nimport { PutPayload } from \"./models/put\";\r\nimport { SetPayload } from \"./models/set\";\r\nimport { Socket } from \"net\";\r\nimport { SetVertexPayload } from \"./models/set_vertex\";\r\nimport { DeleteVertexPayload } from \"./models/delete_vertex\";\r\nimport { DFSPayload } from \"./models/dfs\";\r\nimport { GetAllWithPayload } from \"./models/get_all_with\";\r\nimport { PutAllWithPayload } from \"./models/put_all_with\";\r\nimport { Command } from \"./models/command\";\r\nimport { SetUserPayload } from \"./models/set_user\";\r\nimport { GetUserPayload } from \"./models/get_user\";\r\nimport { PutUserPayload } from \"./models/put_user\";\r\nimport { DeleteUserPayload } from \"./models/delete_user\";\r\nimport { InjectPayload } from \"./models/inject\";\r\nimport { GetAllPayload } from \"./models/get_all\";\r\nimport { DeletePayload, SetRefPayload } from \"./models\";\r\nimport { DeleteRefsPayload } from \"./models/delete_refs\";\r\nimport { DeleteAllWithPayload } from \"./models/delete_all_with\";\r\nimport { PushPayload } from \"./models/push\";\r\nimport { PopPayload } from \"./models/pop\";\r\nimport { PutAllPayload } from \"./models/put_all\";\r\nimport { DeleteRefPayload } from \"./models/delete_ref\";\r\nimport tls from \"tls\"\r\n\r\n\r\n\r\nexport default class Satori {\r\n  host!: string;\r\n  port!: number;\r\n  username!: string;\r\n  token!: string;\r\n  network_pwd!: string;\r\n\r\n  constructor(\r\n    host: string,\r\n    port: number,\r\n    username?: string,\r\n    token?: string,\r\n    network_pwd?: string\r\n  ) {\r\n    this.host = host;\r\n    this.port = port;\r\n    if (network_pwd) {\r\n      this.network_pwd = network_pwd;\r\n    } else {\r\n      this.network_pwd = \"\";\r\n    }\r\n\r\n    if (username) this.username = username;\r\n    if (token) this.token = token;\r\n  }\r\n\r\n  setHost(host: string) {\r\n    this.host = host;\r\n  }\r\n\r\n  setPort(port: number) {\r\n    this.port = port;\r\n  }\r\n\r\n  async getSocket(): Promise<tls.TLSSocket> {\r\n    \r\n    const client = tls.connect({host: this.host, port: this.port, rejectUnauthorized: false});\r\n    client.on(\"error\", err => {\r\n      \r\n    })\r\n    \r\n    return client;\r\n\r\n  }\r\n\r\n  async set(payload: SetPayload): Promise<boolean> {\r\n    if (!payload.expires) payload.expires = false;\r\n    if (!payload.expiration_time) payload.expiration_time = -1;\r\n    if (!payload.type) payload.type = \"normal\";\r\n    if (!payload.vertices) payload.vertices = [];\r\n    if (payload.expiration_time) {\r\n      if (payload.expiration_time > -1) payload.expires = true;\r\n    }\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"SET\";\r\n\r\n    const socket = await this.getSocket();\r\n\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        const dataStr: string = data.toString();\r\n\r\n        if (dataStr == \"OK\") {\r\n          socket.destroy();\r\n          resolve(true);\r\n        } else {\r\n          socket.destroy();\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async get(payload: GetPayload): Promise<any | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET\";\r\n\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        const data_json = JSON.parse(data.toString());\r\n\r\n        if (data_json.key == \"not found\") {\r\n          resolve(undefined);\r\n        }\r\n\r\n        resolve(data_json);\r\n      });\r\n    });\r\n  }\r\n\r\n  async put(payload: PutPayload): Promise<boolean> {\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"PUT\";\r\n\r\n    const socket = await this.getSocket();\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async delete(payload: DeletePayload): Promise<boolean> {\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE\";\r\n\r\n    const socket = await this.getSocket();\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async encrypt(payload: EncryptPayload): Promise<boolean> {\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"ENCRYPT\";\r\n\r\n    const socket = await this.getSocket();\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async setVertex(payload: SetVertexPayload): Promise<boolean> {\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"SET_VERTEX\";\r\n\r\n    const socket = await this.getSocket();\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async getVertex(payload: GetPayload): Promise<any | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET_VERTEX\";\r\n\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteVertex(payload: DeleteVertexPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_VERTEX\";\r\n\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async dfs(payload: DFSPayload): Promise<any | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DFS\";\r\n\r\n    socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          resolve(JSON.parse(data.toString()));\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async getAllWith(payload: GetAllWithPayload): Promise<any[] | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET_ALL_WITH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async getOneWith(payload: GetAllWithPayload): Promise<any | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET_ONE_WITH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async putAllWith(payload: PutAllWithPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"PUT_ALL_WITH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async putOneWith(payload: PutAllWithPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"PUT_ONE_WITH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteOneWith(payload: GetAllWithPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_ONE_WITH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async setRef(payload: SetRefPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"SET_REF\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteRefs(payload: DeleteRefsPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_REFS\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async getRefs(payload: DeleteRefsPayload): Promise<any[] | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET_REFS\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async setUser(payload: SetUserPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"SET_USER\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async getUser(payload: GetUserPayload): Promise<any | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET_USER\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async putUser(payload: PutUserPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"PUT_USER\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteUser(payload: DeleteUserPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_USER\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteAuth(payload: Command): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_AUTH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async inject(payload: InjectPayload): Promise<any | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"INJECT\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(data.toString());\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async getAll(payload: GetAllPayload): Promise<any[] | undefined> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"GET_ALL\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        try {\r\n          const data_json = JSON.parse(data.toString());\r\n\r\n          resolve(data_json);\r\n        } catch {\r\n          resolve(undefined);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteAll(payload: GetAllPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_ALL\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async deleteAllWith(payload: DeleteAllWithPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_ALL_WITH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async push(payload: PushPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"PUSH\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async remove(payload: PushPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"REMOVE\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async pop(payload: PopPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"POP\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async splice(payload: PopPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"SPLICE\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async decrypt(payload: EncryptPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DECRYPT\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async put_all(payload: PutAllPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"PUT_ALL\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async delete_ref(payload: DeleteRefPayload): Promise<Boolean> {\r\n    const socket = await this.getSocket();\r\n\r\n    if (this.username) payload.username = this.username;\r\n    if (this.token) payload.token = this.token;\r\n    payload.command = \"DELETE_REF\";\r\n\r\n   socket.write(JSON.stringify(payload));\r\n\r\n    return new Promise((resolve, reject) => {\r\n      socket.on(\"data\", (data) => {\r\n        if (data.toString() == \"OK\") {\r\n          resolve(true);\r\n        } else {\r\n          reject(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { EncryptPayload } from \"./models/encrypt\";\r\nimport { GetPayload } from \"./models/get\";\r\nimport { PutPayload } from \"./models/put\";\r\nimport { SetPayload } from \"./models/set\";\r\nimport { Socket } from \"net\";\r\nimport { SetVertexPayload } from \"./models/set_vertex\";\r\nimport { DeleteVertexPayload } from \"./models/delete_vertex\";\r\nimport { DFSPayload } from \"./models/dfs\";\r\nimport { GetAllWithPayload } from \"./models/get_all_with\";\r\nimport { PutAllWithPayload } from \"./models/put_all_with\";\r\nimport { Command } from \"./models/command\";\r\nimport { SetUserPayload } from \"./models/set_user\";\r\nimport { GetUserPayload } from \"./models/get_user\";\r\nimport { PutUserPayload } from \"./models/put_user\";\r\nimport { DeleteUserPayload } from \"./models/delete_user\";\r\nimport { InjectPayload } from \"./models/inject\";\r\nimport { GetAllPayload } from \"./models/get_all\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport Satori from \"./satori\";\r\nimport { FieldEntry, SetRefPayload } from \"./models\";\r\n\r\nexport default class Schema<T extends object> {\r\n\r\n  satori!: Satori;\r\n  schemaName!: string;\r\n  body!: T;\r\n  key!: string;\r\n\r\n  constructor(body: T, satori: Satori, schemaName: string, key?: string) {\r\n    this.body = body;\r\n    this.satori = satori;\r\n\r\n    if (key) {\r\n      this.key = key;\r\n    }\r\n    this.key = uuidv4();\r\n    this.schemaName = schemaName;\r\n  }\r\n\r\n  async set(): Promise<boolean> {\r\n    return await this.satori.set({\r\n      key: this.key,\r\n      data: this.body,\r\n      type: this.schemaName,\r\n    });\r\n  }\r\n\r\n  async delete(): Promise<boolean> {\r\n    return await this.satori.delete({ key: this.key });\r\n  }\r\n\r\n  async encrypt(encryption_key: string): Promise<boolean> {\r\n    return await this.satori.encrypt({\r\n      key: this.key,\r\n      encryption_key: encryption_key,\r\n    });\r\n  }\r\n\r\n  async setVertex(vertex: string[], encryption_key?: string): Promise<boolean> {\r\n    return await this.satori.setVertex({\r\n      key: this.key,\r\n      vertex: vertex,\r\n      encryption_key: encryption_key,\r\n    });\r\n  } //relation\r\n\r\n  async getVertex(): Promise<any | undefined> {\r\n    return await this.satori.getVertex({ key: this.key });\r\n  }\r\n\r\n  async deleteVertex(\r\n    vertex: string,\r\n    encryption_key?: string\r\n  ): Promise<Boolean> {\r\n    return this.satori.deleteVertex({\r\n      key: this.key,\r\n      encryption_key: encryption_key,\r\n      vertex: vertex,\r\n    });\r\n  }\r\n\r\n  async dfs(relation?: string): Promise<any | undefined> {\r\n    return this.satori.dfs({ node: this.key, relation: relation });\r\n  }\r\n\r\n  async getAllWith(field_array: FieldEntry[]): Promise<any[] | undefined> {\r\n    return this.satori.getAllWith({\r\n      field_array: field_array,\r\n      type: this.schemaName,\r\n    });\r\n  }\r\n\r\n  async getOneWith(field_array: FieldEntry[]): Promise<any | undefined> {\r\n    return this.satori.getOneWith({\r\n      field_array: field_array,\r\n      type: this.schemaName,\r\n    });\r\n  }\r\n\r\n  async putAllWith(\r\n    field_array: FieldEntry[],\r\n    replaceField: string,\r\n    replaceValue: any\r\n  ): Promise<Boolean> {\r\n    return this.satori.putAllWith({\r\n      replace_field: replaceField,\r\n      replace_value: replaceValue,\r\n      type: this.schemaName,\r\n      field_array: field_array,\r\n    });\r\n  }\r\n\r\n  async putOneWith(\r\n    field_array: FieldEntry[],\r\n    replaceField: string,\r\n    replaceValue: any\r\n  ): Promise<Boolean> {\r\n    return this.satori.putOneWith({\r\n      replace_field: replaceField,\r\n      replace_value: replaceValue,\r\n      type: this.schemaName,\r\n      field_array: field_array,\r\n    });\r\n  }\r\n\r\n  async deleteOneWith(field_array: FieldEntry[]): Promise<Boolean> {\r\n    return this.satori.deleteOneWith({\r\n      field_array: field_array,\r\n      type: this.schemaName,\r\n    });\r\n  }\r\n\r\n  async setRef(ref: string): Promise<Boolean> {\r\n    return await this.satori.setRef({ key: this.key, ref: ref });\r\n  }\r\n\r\n  async deleteRefs(encryption_key?: string): Promise<Boolean> {\r\n    return await this.satori.deleteRefs({\r\n      key: this.key,\r\n      encryption_key: encryption_key,\r\n    });\r\n  }\r\n\r\n  async getRefs(): Promise<any[] | undefined> {\r\n    return await this.satori.getRefs({ key: this.key });\r\n  }\r\n\r\n  async getAll(): Promise<T[] | undefined> {\r\n    return await this.satori.getAll({ type: this.schemaName });\r\n  }\r\n\r\n  async deleteAll(): Promise<Boolean> {\r\n    return await this.satori.deleteAll({ type: this.schemaName });\r\n  }\r\n\r\n  async deleteAllWith(field_array: FieldEntry[]): Promise<Boolean> {\r\n    return await this.satori.deleteAllWith({field_array: field_array, type: this.schemaName });\r\n  }\r\n\r\n  async push(value: any, array: string): Promise<Boolean> {\r\n    return await this.satori.push({key: this.key, value: value, array: array})\r\n  }\r\n\r\n  async pop(array: string): Promise<Boolean> {\r\n    return await this.satori.pop({key: this.key, array: array})\r\n  }\r\n\r\n  async splice(array: string): Promise<Boolean> {\r\n    return await this.satori.splice({key: this.key, array: array})\r\n  }\r\n\r\n  async remove(value: any, array: string): Promise<Boolean> {\r\n    return await this.satori.remove({key: this.key, value: value, array: array})\r\n  }\r\n\r\n  async decrypt(encryption_key: string): Promise<Boolean> {\r\n    return await this.satori.decrypt({key: this.key, encryption_key: encryption_key})\r\n  }\r\n\r\n}\r\n"],"mappings":"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","names":[]}